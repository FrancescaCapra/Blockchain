---
tags:
  - blockchain
date: " 2024-04-07"
up: "[[Blockchain]]"
status: "#idea"
---
# Ethereum

When we work with Ethereum, we are basically working with networks of computers that are used to transfer money and store data. 

As described above, ethureum has many networks. There is one main network used to the deployment of dapps, but there are also test networks in order to test dapp, and we can also create our private network.

Network is composed by nodes, and a node is just a machine that runs Ethereum client.

Anyone can run a node in a ethereum network. Each node created has a full and separate copy of the blockchain.

# Connect to Ethereum network

- For developers: developers interact with ethereum network by [[web3.js]]
- For consumers: consumers interact with ethereum network by [[Metamask]]

![[Pasted image 20240407205116.png]]

# Ethereum Account
An (**external**) account has 3 main information in ethereum network. 
- Account address: allows to identify the account in the network
- Public key: stored as exidecimal numbers
- Private Key: stored as exidecimal numbers

In ethereum network, the account lives in its "own network" but it is able to connectes to every ethereum network. However, every wallet that we create in an ethereum network lives alone from other networks.

![[Pasted image 20240407210027.png]]

# Ethereum transaction

The general flow is the following:

1. Enter the address of the account
2. Address sent to backend server
3. Backend server used [[web3.js]] library to create a **transaction object**
4. Backend served sent **transaction object** to the Sepolia test network
5. Backend server waited for transaction to be confimed
6. Backend server sent success message back to the browser

A transaction is just a **object** composed by the following elements: 
- **nonce**: it is a number that counts how many times an address has sent "money" to another address.
- **to**: the destinator of the transaction
- **value**: the amount of ether that we want to send to the other account
- **stargas**:
- **gaslimit**:
- **v,s,r**: one way generated crypto parameters from the private key of the sender that, once combined,  the sender's account address can be retrived. The existence of these numbers prooves that the transaction has been generated by the private key owner.

![[Pasted image 20240407213052.png]]

Any time we want to update any data on the blockchain, we have to submit a transaction and wait the block to be mined. This includes transfer money or smart contract deployment. This is direclty linked to [[Solidity|Solidity functions]]. ^19d4ca
# How to validate a transaction

Once we send the transaction to a specific Ethereum network, it reaches one specific node. This means that our application will be comunicating to a specific node, which communicates to different nodes in the network.
![[Pasted image 20240407214224.png]]
The node has an entire copy of the blockchain. The node recives our transaction and other transactions from different people.

![[Pasted image 20240407214510.png]]
The node gather the transactions and assembles them into one block, and applies a consensus mechaninsm to mine the block.

![[Pasted image 20240407214718.png]]

More info [here](https://andersbrownworth.com/blockchain) related to mine a block.

# Mine a block
Ethereum blockchian, the miner doesn't look for a hash value (==proof of work==) that is less than a some target value. The hash lengthis 264 bit
![[Pasted image 20240407215200.png]]
The entire process of re-hashes untill the algorithm finds the hash related to the target value takes time, and that is called ==block time==.

The ethereum network has a block time of 15 seconds. However, this is not always be the case. Thus, the ==difficulty target==, which depends on the target value, changes according to the time is requiring to mine a block (if less time, target increases, viceversa). To get a good idea of the current situation, go [here](https://etherscan.io/chart/blocktime) 

# Wei and Ether

They identifies the currency used in the Ethereum network. 
Wei, like others, is a small unit of ether (1Mln wei = 1 ether). [see more](https://eth-converter.com/)

# Gas 

Whenever we initiate a transaction on the Ethereum network to modify the blockchain, we must specify the following parameters:

- `gasPrice`: This indicates the amount of **wei** the sender is willing to pay per unit of gas to ensure the transaction's processing. For instance, if `gasPrice` is set to 10 and the operation consumes 3 units of gas, the sender is prepared to pay (10 x 3) 30 wei.
- `startGas`: This represents the total number of units of **gas** allocated for the transaction, indicating the maximum amount the sender is willing to spend on gas for this transaction.

Let's illustrate this with an example by invoking a function that performs certain operations:

**Remember**: For any type of operation the function has to execute, there is a specific amount of gas we have to pay ([see more](https://wiki.learnblockchain.cn/OPCODE_Gas.pdf))

![[Pasted image 20240408221657.png]]

We are ready to allocate 300 wei for each unit of gas, with a maximum limit of spending no more than 20 units of gas for processing the transaction. In this instance, the transaction will proceed as it only requires 14 units of gas to execute. However, if the gas limit were set to 10, the transaction would have been halted due to insufficient gas to complete the subsequent operation, which requires more gas than available. Additionally, any excess gas provided beyond the operation's requirement will be refunded to our account.
# Related:

---
# Reference

1. dcpdkpòd ^b8d64f
2. kncsnmè
